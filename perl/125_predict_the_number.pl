use POSIX qw/ ceil /;

my $LOOKUP = '01121220122020011220200120010112122020012001011220010112011212201220200120010112200101120112122020010112011212200112122012202001122020012001011220010112011212202001011201121220011212201220200120010112011212200112122012202001011212201220200112202001200101121220200120010112200101120112122020010112011212200112122012202001200101120112122001121220122020010112122012202001122020012001011220010112011212200112122012202001011212201220200112202001200101120112122012202001122020012001011212202001200101122001011201121220';

sub solve {
	my $n = shift @_;
	my $l = shift @_;

	return 0 if $n == 0;

	my $len = defined $l ? $l : 1 << int( ceil( log( $n ) / log( 2 ) ) );
	my $half_len = $len >> 1;

	return substr $LOOKUP, $n, 1 if $len < 512;

	return solve( $n, $half_len ) if $n < $half_len;
	return ( solve( $n - $half_len, $half_len ) + 1 ) % 3;
}

open my $fh, '<', $ARGV[0];

for my $line ( <$fh> ) {
	$line =~ s/[\n\r]+//;
	next if $line eq '';

	print solve( $line ), "\n";
}

close $fh;

exit 0;

